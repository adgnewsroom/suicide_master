<html>
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Gelasio|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <!-- <link rel="stylesheet" href="bubble_chart.css"> -->
    <!-- <link rel="stylesheet" href="reset.css"> -->




    <style>

body {
 background-color:#D9D9D9;
 overflow-x:hidden;
 overflow-y:scroll;
}

/* .container {
  max-width: 800px;
  margin: auto;
} */

.bubble_intro p{
  font-family: 'Roboto', sans-serif;
}

.button {
  font-family: 'Roboto', sans-serif;
  min-width: 100px;
  padding: 4px 10px;
  cursor: pointer;
  text-align: center;
  font-size: 18px;
  border: 1px solid #e0e0e0;
  text-decoration: none;

  color: #444; /* rgba not supported (IE 8) */
  color: rgba(0, 0, 0, 0.80); /* rgba supported */
  border: 1px solid #999;  /*IE 6/7/8*/
  border: none rgba(0, 0, 0, 0);  /*IE9 + everything else*/
  background-color: #bdbdbd;
  text-decoration: none;
  border-radius: 2px;
}

.button.active {
  background: dimgrey;
  color: #fff;
}

#bubble {
  max-width: 80%;
  height: 300px;
  clear: both;
  margin-bottom: 10px;
}


  #toolbar {
    padding-left: 3vw;
    margin: auto;
    width: 80%;
  }

    .year {
      font-size: 20px;
      fill: #aaa;
      padding: 3px;
      background-color: black;
      border-radius: 5px;
      cursor: default;
    }

    .age_range {
      background-color: black;
      border-radius: 5px;
      padding: 3px;
      font-size: 20px;
      fill: #aaa;
      cursor: default;
    }

    .manner {
      background-color: black;
      border-radius: 5px;
      padding: 3px;
      font-size: 18px;
      fill: #aaa;
      cursor: default;
    }

    hr.divider {
    margin: 0.3em;
    border-width: 0.8px;
  }

  .tooltip {
  	position: absolute;
  	top: 100px;
  	left: 100px;
    -moz-border-radius:5px;
  	border-radius: 4px;
    border: 1px solid #2F4F4F;
    background: BlanchedAlmond;
  	opacity: 0.8;
    /* color: black; */
  	padding: 8px;
  	max-width: 190px;
  	/* font-size: 12px; */
  	z-index: 10;
  }

  .tooltip .title {
  	font-size: 13px;
  }

  .tooltip .category {
    font-size: 15px;
    font-weight: bold;
  }

  .tooltip .name {
    font-size: 19px;
    line-height: 35px;
    font-family: 'Gelasio', serif;
    background-color: #2F4F4F;
    padding: 1px 4px;
    font-weight: bold;
    border-radius: 5px;
    color: white;
    text-align: center;
  }

  .tooltip .dob {
    font-family: 'Roboto', sans-serif;
    font-size: 15px;
    font-weight: bold;
    text-align: center;
  }

  .tooltip .value {
    font-family: 'Roboto', sans-serif;
    font-size: 15px;
    font-weight: bold;
  }


.wrapper {
  overflow-x:hidden;
}

.background {
  background-image: url("title.jpg");
  filter: grayscale(100%);
  filter: brightness(40%);
  height: 100%;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}


.foreground {
  width: 100%;
  text-align: center;
  position: absolute;
  flex-direction: column;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 103.5vh;
}

h1 {
  font-size: 4em;
  font-family: 'Gelasio', serif;
  text-align: center;
  font-weight: bold;
  color: white;
  display: block;
}

h2 {
  font-family: 'Gelasio', serif;
  text-align: center;
  font-weight: bold;
}


h3 {
  font-family: 'Roboto', sans-serif;
  font-size: 1.6em;
  color: white;
  text-align: left;
  max-width: 80vw;
}

h4 {
  font-size: 1.8em;
  text-align: center;
  padding-top: 30px
}

h5 {
  font-size: 1.5em;
  color: white;
  text-align: center;
  padding-top: 30px
}

p {
  max-width: 730px;
  margin: auto;
  padding: 0 15px;
  margin-bottom: 1em;
  font-family: 'Gelasio', serif;
  font-size: 1.3em;
}


.bubble_intro p1 {
  width: 600px;
  margin: auto;
  padding: 0 15px;
  margin-bottom: 1em;
  font-family: 'Roboto', sans-serif;
  font-size: 1.1em;
  background-color: rgb(245, 245, 220);
  border-radius: 5px;
  padding: 20px;
  display: block;

}

p:first-of-type:first-letter {
    float: left;
    font-size: 65px;
    line-height: 1;
    font-weight: bold;
    margin-right: 9px;
}

#vis {
  align-items: center;
  justify-content: center;
  display: block;
  padding-top: 2vh;
  padding-left: 15vw;
}


#chart {
  /* padding-bottom: 1vh; */
  padding-left: 3vw;
  /* max-height: 90%; */
}

#share {
  display: inline-block;
  position: absolute;
  top: 5;
  right: 1;
  width: 80px;
  z-index: 150;
}

/* buttons */

#share a {
  display: inline-block;
  margin: 5px;
  opacity: 0.7;
}

#share a:hover {
  opacity: 1;
}

#share img {
  display: inline-block;
  float: left;
  position: relative;
  width: 25px;
  height: 25px;
  margin: 0px;
  padding: 0px;
}

.col-md-6 a:hover {
  opacity: 1;
}

.col-md-6 a {
  opacity: 0.7;
}


#logo {
  display: inline-block;
  float: left;
  position: relative;
  flex: 0 0 700px;
  position:relative;
  left:51%;
  transform:translate(-30%, 50%);
  z-index: 100;
    }

#logo img {
  display: inline-block;
  float: left;
  position: relative;
  width: 55%;
  z-index: 100;
    }

#logo a{
  opacity: 1;
}

#logo a:hover {
  opacity: 0.7;
}

.states {
  stroke: #fff;
  stroke-width:1px;
}

.states:hover{
  opacity: .6;
}

.legendLinear text {
    font-size: 12px;
}

.d3-tip {
  line-height: 1;
  padding: 12px;
  background: BlanchedAlmond;
  border: 1px solid #2F4F4F;
  opacity: 0.8;
  border-radius: 2px;
}

.scroll {
  position: relative;
  left: 50%;
  transform: translate(-50%, -650%);
  top: 0;
  text-align: center;
  width: 24px;
  height: 24px;
}

.chevron {
  position: absolute;
  width: 28px;
  height: 8px;
  opacity: 0;
  transform: scale3d(0.5, 0.5, 0.5);
  animation: move 3s ease-out infinite;
}

.chevron:first-child {
  animation: move 3s ease-out 1s infinite;
}

.chevron:nth-child(2) {
  animation: move 3s ease-out 2s infinite;
}

.chevron:before,
.chevron:after {
  content: ' ';
  position: absolute;
  top: 0;
  height: 100%;
  width: 51%;
  background: white;
}

.chevron:before {
  left: 0;
  transform: skew(0deg, 30deg);
}

.chevron:after {
  right: 0;
  width: 50%;
  transform: skew(0deg, -30deg);
}

@keyframes move {
  25% {
    opacity: 1;

  }
  33% {
    opacity: 1;
    transform: translateY(30px);
  }
  67% {
    opacity: 1;
    transform: translateY(40px);
  }
  100% {
    opacity: 0;
    transform: translateY(55px) scale3d(0.5, 0.5, 0.5);
  }
}

.text {
  display: block;
  padding-top: 65px;
  margin-top: 65px;
  margin-left: -30px;
  font-family: "Helvetica Neue", "Helvetica", Arial, sans-serif;
  font-size: 12px;
  color: white;
  text-transform: uppercase;
  white-space: nowrap;
  opacity: .25;
  animation: pulse 2s linear alternate infinite;
}

.subhead {
  line-height: 0.5;
  text-align: center;
  padding-bottom: 3vh;
}
.subhead span {
  display: inline-block;
  position: relative;
}
.subhead span:before,
.subhead span:after {
  content: "";
  position: absolute;
  height: 5px;
  border-bottom: 1px solid DarkSlateGray;
  border-top: 1px solid DarkSlateGray;
  top: 0;
  width: 250px;
}
.subhead span:before {
  right: 100%;
  margin-right: 15px;
}
.subhead span:after {
  left: 100%;
  margin-left: 15px;
}

.carousel-cell{
  width: 80vw;
  overflow: hidden;
  padding-right:100px;
}

.slideshow img {
  width: 100%;
}

.slideshow {
  padding-top: 100px;
  padding-bottom: 100px;
}


@media (max-width: 992px) {

  .subhead span:before,
  .subhead span:after {
    width: 140px;
  }

#vis {height: 50%;}

#chart {height: 50%;}
}

/* Small devices (landscape phones, less than 768px) */
@media (max-width: 768px) {

  h1 {
    font-size: 3em;
    font-family: 'Gelasio', serif;
    text-align: center;
  }

  h3 {
    font-size: 1.3em;
  }

  h2 {
    font-size: 1.5em;
  }

  p {
    font-size: 1.1em;
    width:400px;
  }

  #logo img {
    width: 50%
  }

#share {
  width: 70px;
}

#share img {
  width: 30px;
  height: auto
  }

.chevron {
  width: 20px;
  height: 5px;
  }

.text {
  font-size: 10px
  }

#chart .tooltiptext{
  font-size: 5px
}

.subhead span:before,
.subhead span:after {
  width: 90px;
}

h4 {
  font-size: 1.0em;
}

h5 {
  font-size: 1.0em;
}

#share img {
  width: 18px;
  height: 18px;
}

}


/* Extra small devices (portrait phones, less than 576px) */
@media (max-width: 576px) {

  h1 {
    font-size: 2em;
    font-family: 'Gelasio', serif;
    text-align: center;
  }

  h3 {
    font-size: 1.1em;
  }

p {
  font-size: 1.0em;
  width:380px;
  }

  .subhead span:before,
  .subhead span:after {
    width: 70px;
  }

  h4 {
    font-size: 0.9em;
  }

  h5 {
    font-size: 0.8em;
  }

}


  </style>
  </head>
  <body>
<div class="wrapper">
    <section id="topper">
      <div id="logo"><a href="http://www.arkansasonline.com" target="_blank"><img alt="Arkansas Democrat-Gazette" src="https://s3.amazonaws.com/new_videos/year_in_pictures/logo.png" class="center"></a></div>


      <div id="share">
        <a target="_blank" class="twitter" title="Share on Twitter" href="https://twitter.com/intent/tweet?url=https://www.arkansasonline.com/yearinreview/&text=Explore the best stories from the Arkansas Democrat-Gazette newsroom in 2019."><img
            src="twitter.png" alt="2"></a>
        <a target="_blank" class="facebook" title="Share on Facebook" href="https://www.facebook.com/share.php?u=https://www.arkansasonline.com/yearinreview/&title=Explore the best stories from the Arkansas Democrat-Gazette newsroom in 2019."><img
            src="facebook.png"></a>
      </div>
      <div class="background"></div>
      <div class="foreground">
          <div id="titlecard">
          <h1>Children in Peril</h1>
        </div>
            <h3>The rates of suicides by minors have been on a climb in Arkansas.</h3>
            <h5>By Ginny Monk and Yutao Chen</h5>
      </div>

    <div class="scroll">
      <div class="chevron"></div>
      <div class="chevron"></div>
      <div class="chevron"></div>
      <span class="text">Scroll down</span>
    </div>
  </section>



<div class="spacer" style="padding: 7vh"></div>
<article>
    <P>Kelsey Bell is alive; she’s happy a lot of the time.</p>

    <p>The now-19-year-old attempted suicide when she was 13 after years of dealing with depression, anxiety and an eating disorder. She says her recovery has highs and lows, but she’s stable now —
    enough so that she is a junior board member with the American Foundation for Suicide Prevention and is majoring in psychology.</p>

    <p>“I guess that pain turned into passion,” Kelsey said.</p>

    <p>The rates of suicides by minors have been on a climb for the past several years. In Arkansas, they’ve increased from 10 in 2010 to 27 in 2017, according to federal mortality data from the Centers for Disease Control and Prevention.</p>


    <div class="container">
      <h4>Child suicides in Arkansas from 2012 to 2017</h4>
      <div id="toolbar">
        <a id="all" class="button active">All deaths</a>
        <a id="manner" class="button">By manner</a>
        <a id="year" class="button">By year</a>
        <a id="age_range" class="button">By age</a>

        <svg class="legend" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 viewBox="0 0 50 33" style="enable-background:new 0 0 50 33; width: 80px; transform: translate(450px, -20px);" xml:space="preserve">
        <style type="text/css">
        	.st0{fill:#1E90FF;}
        	.st1{fill:#F08080;}
        	.st2{font-family:'ArialMT';}
        	.st3{font-size:10px;}
        </style>
        <g>
        	<rect x="4" y="5" class="st0" width="9" height="9"/>
        </g>
        <g>
        	<rect x="4" y="19" class="st1" width="9" height="9"/>
        </g>
        <text transform="matrix(1 0 0 1 15.9678 12.7139)" class="st2 st3">Male</text>
        <text transform="matrix(1 0 0 1 15.9678 27.7139)" class="st2 st3">Female</text>
        </svg>

      </div>
      <div id="bubble"></div>

      <div class="bubble_intro">

      <p1>Beginning in September 2018, the Arkansas Democrat-Gazette began gathering prosecutorial files, coroners’ reports, archived news articles, Department of Human Services records and police reports on the deaths of children in every county in Arkansas from 2012 to 2017.

      <br><br>The newspaper then created a database of those deaths to analyze the cause, manner and circumstances surrounding each death. The findings showed that children in almost every county in the state died by suicide over that time span.

      <br><br>The oldest was just a few months away from his 18th birthday, and the youngest was about to turn 6. All but 13 were by teenagers.

      <br><br>Twenty-one of the suicides examined by the newspaper were by girls, and 42 — about 66% — were by boys.

      <br><br>Some reports listed histories of mental health problems or major life changes such as a breakup, death in the family or a sudden move. Others listed no such history.

      <br><br>The reports are incomplete, as shown when comparing the newspaper’s database with federal mortality data. Some coroners didn’t have records for every year requested because their predecessors had taken records home with them when they left office.</p1 >
</div>
<div class="spacer" style="padding: 7vh"></div>

    </div>


    <p>Federal data show that 119 children died in Arkansas from 2012 to 2017, the most recent year for which data are available. Documents gathered by the newspaper show only 63 reports of suicide.</p>

    <p>Research shows that suicide is the second-leading reason for death in people ages 15 to 24. The numbers have increased as well for young children under the age of 10, according to the CDC.</p>

    <p>Experts who work in suicide prevention, research and mental health advocacy weren’t able to identify the reason behind these increases — all said that there are many possible explanations.</p>

    <p>Throughout the state, efforts to prevent suicides, educate Arkansans and decrease stigmas surrounding mental health are ramping up.</p>

    <p>“One suicide is too many suicides,” said Mary Meacham, the chair of education and prevention for the Arkansas chapter of the American Foundation for Suicide Prevention.</p>

    <h4>Suicides by minors, per 100,000 from 2012 to 2017</h4>

    <div id="vis"></div>

    <h4>Suicides by minors, per 100,000 from 1999 to 2017</h4>

    <div id="chart"></div>

</article>
    <div class="spacer" style="padding: 7vh"></div>

<article>

    <h2 class="subhead"><span>‘Really sad’</span></h2>

    <p>Kelsey was 9 when her mother, Ladeana Bell, first noticed mental health problems in her daughter. Ladeana drove to Kelsey’s elementary school and saw the other children running and playing. Kelsey, though, was lying on the ground, lethargic and trying to take a nap.</p>

    <p>“This little girl is really sad,” Ladeana thought to herself.</p>

    <p>Ladeana is a licensed therapist with a private practice and knew how to get help for her daughter. She’d bring up the idea of therapy, but at first Kelsey was resistant.</p>

    <p>“Sometimes I wonder if I should have pushed harder,” Ladeana said in an interview earlier this month.</p>

    <p>Kelsey started therapy when she was 11. She says it made it difficult to foster relationships with her peers; she didn’t want to tell anyone that she was going to therapy.</p>

    <p>There wasn’t one particular reason that she attempted suicide two years after starting therapy, she said. She’d gotten into a fight with a friend that day, but her problems went well beyond that.</p>

    <p>Her eating disorder wasn’t getting better, and she says she wasn’t engaging with her therapy. Her depression, she said, manifested itself as anger much of the time.</p>

    <p>“It was just things piling up,” Kelsey said. ” … I just knew I didn’t want to be alive anymore.”</p>

    <div class="slideshow">
        <div class='carousel'>
            <div class='carousel-cell'><img src="2.jpg"></div>
            <div class='carousel-cell'><img src="title.jpg"></div>
        </div>
    </div>

    <p>Those interviewed by the newspaper agreed that it’s nearly impossible to learn the reason for the increase in suicides by children.</p>

    <p>“Each case is its own,” Meacham said.</p>

    <p>But, Meacham added, more research is needed, particularly into suicides by minors.</p>

    <p>“The funding for research hasn’t been there,” she said. ” … We need to treat this like any public health issue.”</p>

    <p>The largest spike in completed suicides by children are in 14-year-olds, said Buster Lackey, the executive director of the Arkansas chapter of the National Alliance on Mental Illness.</p>

    <p>Suicide is the second-leading cause of death in teenagers, according to the CDC.</p>

    <p>Lackey, like other experts interviewed by the newspaper, cited concerns about the growing role of social media in kids’ lives as one of the possible contributors to increases in suicide rates. He specifically addressed the ways in which the internet has allowed kids to bully each other 24/7 or for adults to bully children online.</p>

    <p>“When I got on the bus or got home, it was over,” he said. “It’s not like that anymore.”</p>

    <p>Kelsey said social media is still hard for her — the barrage of filtered photos depicting the best parts of everyone else’s lives can make her feel like she is less-than.</p>

    <p>Several experts also cited well-publicized cases of suicide’s relation to social media such as that of Michelle Conrad, who encouraged her boyfriend to kill himself via social media in 2014.</p>

    <p>Ladeana added that kids have access to more information, some of which may be harmful. Kelsey used to look at “dark stuff” online that encouraged self-harm, Ladeana said.</p>

    <p>In addition to social media, Ladeana said she thinks that the country’s growing political division has damaged the sense of community and decency. She formerly served as the Arkansas chapter’s research chairwoman.</p>

    <p>“It’s cattiness,” she said. “There a lot of ‘mean-girl’ behavior.”</p>

</article>

    <div class="spacer" style="padding: 7vh"></div>

<article>

    <h2 class="subhead"><span>Death classification</span></h2>

    <p>Coroners are also more cognizant of the need to classify suicides as such, Lackey said. Lackey is also a deputy coroner in Lonoke County who helped to develop a training on investigating infant deaths for Arkansas coroners.</p>

    <p>“A coroner has a pretty powerful position,” Lackey said.</p>

    <p>Coroners determine the means of death — homicide, suicide, accidental or natural. In Arkansas, coroners are elected by a county-wide vote with the exception of Faulkner and Pulaski counties where the coroners are elected.</p>

    <p>There are no training requirements for coroners in Arkansas, but Lackey said in recent years there have been more efforts to train coroners on suicides, overdoses and infant deaths.</p>

  </article>

  <div class="spacer" style="padding: 7vh"></div>


  <!-- Footer -->
<footer class="page-footer font-small unique-color-dark" style="background-color: #383838">

  <!-- Footer Links -->
  <div class="container text-center text-md-left mt-5">

    <!-- Grid row -->
    <div class="row mt-3">

      <!-- Grid column -->
      <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">

        <!-- Content -->
        <!-- <h6 class="text-uppercase font-weight-bold">Company name</h6> -->
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
        <a href="http://www.arkansasonline.com" target="_blank"><img alt="Arkansas Democrat-Gazette" src="https://s3.amazonaws.com/new_videos/year_in_pictures/logo.png" class="center" style="width: 100%"></a>
        <div class="col-md-6 col-lg-9 text-center text-md-right" style="padding-top:10px">

          <!-- Facebook -->
          <a class="fb-ic"><a href="https://www.facebook.com/arkansasonline/" target="_blank">
<img src="facebook.png" style="width:20px"></a>
          </a>
          <!-- Twitter -->
          <a class="tw-ic"><a href="https://twitter.com/arkansasonline" target="_blank">
<img src="twitter.png" style="width: 20px;"></a>
          </a>
          <!--Instagram-->
          <a class="ins-ic"><a href="https://instagram.com/arkansasonline" target="_blank">
<img src="instagram.png" style="width: 20px;"></a>
          </a>
          <!--Linkedin -->
          <a class="li-ic"><a href="https://www.linkedin.com/company/arkansas-democrat-gazette" target="_blank">
<img src="linkedin.png" style="width: 20px;"></a>
          </a>


        </div>

      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4" style="padding-top:20px">

        <!-- Links -->
        <h6 class="text-uppercase font-weight-bold" style="color: white">About</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; color: white;   border-bottom: 1px solid White;"><br>
        <small>
          <a href="https://www.arkansasonline.com/tools/termsofuse/" style="color: white">Terms of Use</a><br>
        </small>
        <small>
          <a href="http://adv.arkansasonline.com/" style="color: white">Advertising</a><br>
        </small>
        <small>
          <a href="https://www.jobsarkansas.com/Jobs/-quat-arkansas%20democrat-gazette-quat-?source=5&countryId=3" style="color: white">Careers</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/tools/privacystatement/" style="color: white">Privacy Statement</a>
        </small>

      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4" style="padding-top:20px">

        <!-- Links -->
        <h6 class="text-uppercase font-weight-bold" style="color: white">Newsroom</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; color: white;   border-bottom: 1px solid White;"><br>
        <small>
          <a href="https://www.arkansasonline.com/corevalues/" style="color: white">Core Values</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/contacts/newstips/" style="color: white">News Tips</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/emails/subscribe/" style="color: white">Newsletters</a><br>
        </small>
        <small>
          <a href="https://digital.olivesoftware.com/Olive/ODN/ArDemocrat/" style="color: white">Today's Paper</a>
        </small>

      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4" style="padding-top:20px">

        <!-- Links -->
        <h6 class="text-uppercase font-weight-bold" style="color: white">Contact</h6>
        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; color: white;   border-bottom: 1px solid White;"><br>
        <small>
          <a href="https://www.arkansasonline.com/digital/faq/" style="color: white">Digital Replica FAQ</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/settings/" style="color: white">Subscriber Help</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/contact/voicesform/" style="color: white">Letters to the Editor</a><br>
        </small>
        <small>
          <a href="https://www.arkansasonline.com/staff/" style="color: white">Newspaper Staff</a>
        </small>


      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links -->

  <!-- Copyright -->
  <div class="footer-copyright text-center py-4" style="color: white; font-size: 14px;">Copyright © 2020, Arkansas Democrat-Gazette, Inc.
  </div>
  <!-- Copyright -->

</footer>

</div>
<!-- Footer -->

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="//d3js.org/queue.v1.min.js"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>
    <!-- <script src="d3-legend.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script src="map.js"></script>
    <script src="bubble.js"></script>




    <script>
    var flky = new Flickity( '.carousel', {});

      var glines
      var mouseG
      var tooltip

      var parseDate = d3.timeParse("%Y")

      var margin = {top: 50, right: 50, bottom: 1, left: 50}
      var width = 1600 - margin.left - margin.right
      var height = 800 - margin.top - margin.bottom

      var lineOpacity = 0.8
      var lineStroke = "4px"

      var axisPad = 7 // axis formatting
      var R = 6 //legend marker

      var category = ["Arkansas", "Texas", "Tennessee", "Oklahoma", "Missouri", "Mississippi", "Louisiana"]
      // since Category B and E are really close to each other, assign them diverging colors
      var color = d3.scaleOrdinal()
        .domain(category)
        .range(["#e41a1c", "#399283", "#43dcc5", "#0b522e", "#bfcd8e", "#5ab220", "#33547a"])
      d3.csv("data.csv", data => {

        var res = data.map((d,i) => {
          return {
            date : parseDate(d.year),
            bidding_no : d.bidding_no,
            state : d.state,
            rate : d.rate
          }
        })

        var xScale = d3.scaleTime()
          .domain(d3.extent(res, d=>d.date))
          .range([0, width])


        var yScale = d3.scaleLinear()
          .domain([0, 21])
          .range([height, 0]);

        var svg = d3.select("#chart").append("svg")
          .attr("width", "100%")
          .attr("height", "100%")
          .attr("viewBox", "20 20 " + 1600 + " " + 980)
          .append('g')
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


        // CREATE AXES //
        // render axis first before lines so that lines will overlay the horizontal ticks
        var xAxis = d3.axisBottom(xScale).ticks(d3.timeYear.every(1)).tickSizeOuter(axisPad*2).tickSizeInner(axisPad*2)
        var yAxis = d3.axisLeft(yScale).ticks(10, "s").tickSize(-width) //horizontal ticks across svg width

        svg.append("g")
          .attr("class", "x axis")
          .attr("transform", `translate(0, ${height})`)
          .call(xAxis)
          .call(g => {
            var years = xScale.ticks(d3.timeYear.every(1))
            var xshift = (width/(years.length))/5 - 16
            g.selectAll("text").attr("transform", `translate(${xshift}, 0)`) //shift tick labels to middle of interval
              .style("text-anchor", "left")
              .attr("y", axisPad+10)
              .attr('fill', 'black')
              .style("font-family", "Roboto")
              .style("font-size", 15)
              .style("font-weight", "bold")

            g.selectAll("line")
              .attr('stroke', 'black')

            g.select(".domain")
              .attr('stroke', 'black')

          })



        svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
          .call(g => {
            g.selectAll("text")
            .style("text-anchor", "middle")
            .attr("x", -axisPad*2)
            .attr('fill', 'black')
            .style("font-family", "Roboto")
            .style("font-size", 15)



            g.selectAll("line")
              .attr('stroke', 'black')
              .attr('stroke-width', 0.7) // make horizontal tick thinner and lighter so that line paths can stand out
              .attr('opacity', 0.3)

            g.select(".domain").remove()

           })
          .append('text')
            .attr('x', 130)
            .attr("y", 5)
            .attr("fill", "black")
            .text("Suicides per 100,000")
            .style("font-family", "Roboto")
            .style("font-size", "15px")


        // CREATE LEGEND //
        var svgLegend = svg.append('g')
            .attr('class', 'gLegend')
            .attr("transform", "translate(" + (width + 20) + "," + 0 + ")")

        var legend = svgLegend.selectAll('.legend')
          .data(category)
          .enter().append('g')
            .attr("class", "legend")
            .attr("transform", function (d, i) {return "translate(0," + i * 25 + ")"})

    svgLegend.append("rect")
            .attr("width", 115)
            .attr("height", 185)
            .attr("x", -120)
            .attr("y", 490)
            .style("fill", "black")
            .style("opacity", "0.1")


        legend.append("circle")
            .attr("class", "legend-node")
            .attr("cx", -101)
            .attr("cy", 508)
            .attr("r", 8)
            .style("fill", d=>color(d))
            // .style("padding", "30px")

        legend.append("text")
            .attr("class", "legend-text")
            .attr("x", -90)
            .attr("y", 514)
            .style("fill", "black")
            .style("font-size", 15)
            .style("font-family", "Roboto")
            .text(d=>d)








        // line generator
        var line = d3.line()
          .x(d => xScale(d.date))
          .y(d => yScale(d.rate))

        renderChart(1) // inital chart render (set default to Bidding Exercise 1 data)

        function renderChart(bidding_no) {
        //
          var resNew = res.filter(d=>d.bidding_no == parseInt(bidding_no))
        //

          var res_nested = d3.nest() // necessary to nest data so that keys represent each state category
            .key(d=>d.state)
            .entries(resNew)

          // APPEND MULTIPLE LINES //
          var lines = svg.append('g')
            .attr('class', 'lines')

          glines = lines.selectAll('.line-group')
            .data(res_nested).enter()
            .append('g')
            .attr('class', 'line-group')

          glines
            .append('path')
              .attr('class', 'line')
              .attr('d', d => line(d.values))
              .style('stroke', (d, i) => color(i))
              .style('fill', 'none')
              .style('opacity', lineOpacity)
              .style('stroke-width', lineStroke)


          // APPEND CIRCLE MARKERS //
          var gcircle = lines.selectAll("circle-group")
            .data(res_nested).enter()
            .append("g")
            .attr('class', 'circle-group')

          gcircle.selectAll("circle")
            .data(d => d.values).enter()
            .append("g")
            .attr("class", "circle")
            .append("circle")
            .attr("cx", d => xScale(d.date))
            .attr("cy", d => yScale(d.rate))
            .attr("r", 2)

          // CREATE HOVER TOOLTIP WITH VERTICAL LINE //
          tooltip = d3.select("#chart").append("div")
            .attr('id', 'tooltip')
            .style('position', 'absolute')
            .style("background-color", "white")
            .style('padding', 4)
            .style('display', 'none')

          mouseG = svg.append("g")
            .attr("class", "mouse-over-effects");

          mouseG.append("path") // create vertical line to follow mouse
            .attr("class", "mouse-line")
            .style("stroke", "#A9A9A9")
            .style("stroke-width", 1.5)
            .style("opacity", "0");

          var lines = document.getElementsByClassName('line');

          var mousePerLine = mouseG.selectAll('.mouse-per-line')
            .data(res_nested)
            .enter()
            .append("g")
            .attr("class", "mouse-per-line");

          mousePerLine.append("circle")
            .attr("r", 3)
            .style("stroke", function (d) {
              return color(d.key)
            })
            .style("fill", "none")
            .style("stroke-width", 2)
            .style("opacity", "0");

          mouseG.append('svg:rect') // append a rect to catch mouse movements on canvas
            .attr('width', width)
            .attr('height', height)
            .attr('fill', 'none')
            .attr('pointer-events', 'all')
            .on('mouseout', function () { // on mouse out hide line, circles and text
              d3.select(".mouse-line")
                .style("opacity", "0");
              d3.selectAll(".mouse-per-line circle")
                .style("opacity", "0");
              d3.selectAll(".mouse-per-line text")
                .style("opacity", "0");
              d3.selectAll("#tooltip")
                .style('display', 'none')

            })
            .on('mouseover', function () { // on mouse in show line, circles and text
              d3.select(".mouse-line")
                .style("opacity", "1");
              d3.selectAll(".mouse-per-line circle")
                .style("opacity", "1");
              d3.selectAll("#tooltip")
                .style('display', 'block')
            })
            .on('mousemove', function () { // update tooltip content, line, circles and text when mouse moves
              var mouse = d3.mouse(this)

              d3.selectAll(".mouse-per-line")
                .attr("transform", function (d, i) {
                  var xDate = xScale.invert(mouse[0]) // use 'invert' to get date corresponding to distance from mouse position relative to svg
                  var bisect = d3.bisector(function (d) { return d.date; }).left // retrieve row index of date on parsed csv
                  var idx = bisect(d.values, xDate);

                  d3.select(".mouse-line")
                    .attr("d", function () {
                      var data = "M" + xScale(d.values[idx].date) + "," + (height);
                      data += " " + xScale(d.values[idx].date) + "," + 0;
                      return data;
                    });
                  return "translate(" + xScale(d.values[idx].date) + "," + yScale(d.values[idx].rate) + ")";

                });

              updateTooltipContent(mouse, res_nested)

            })
          }

      function updateTooltipContent(mouse, res_nested) {

        sortingObj = []
        res_nested.map(d => {
          var xDate = xScale.invert(mouse[0])
          var bisect = d3.bisector(function (d) { return d.date; }).left
          var idx = bisect(d.values, xDate)
          sortingObj.push({key: d.values[idx].state, rate: d.values[idx].rate, year: d.values[idx].date.getFullYear()})
        })

        sortingObj.sort(function(x, y){
           return d3.descending(x.rate, y.rate);
        })

        var sortingArr = sortingObj.map(d=> d.key)

        var res_nested1 = res_nested.slice().sort(function(a, b){
          return sortingArr.indexOf(a.key) - sortingArr.indexOf(b.key) // rank vehicle category based on price of rate
        })

        tooltip.html(sortingObj[0].date)
          .style('display', 'block')
          .style('left', d3.event.pageX - 110)
          .style('top', d3.event.pageY + 20)
          .style('opacity', 0.8)
          .selectAll()
          .data(res_nested1).enter() // for each vehicle category, list out name and price of rate
          .append('div')
          .attr("class", "tooltiptext")
          .style('color', "black")
          .style('font-size', 14)
          // .style('font-weight', "bold")
          .style("font-family", "Roboto")
          .html(d => {
            var xDate = xScale.invert(mouse[0])
            var bisect = d3.bisector(function (d) { return d.date; }).left
            var idx = bisect(d.values, xDate)
            return d.key + ": " + d.values[idx].rate.toString()
          })
      }

    })

    var titleCard = "#titlecard";
    //The effect that will be applied to your page element. See https://daneden.github.io/animate.css/ for full list.
    var yourEffect = "fadeInUp";
    var effectClass = "animated " + yourEffect;
    jQuery( document ).ready(function() {
      jQuery(titleCard).show().addClass(effectClass).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
        jQuery(this).removeClass();
      });
    });


    $(function() {

        var documentEl = $(document),
            fadeElem = $('#topper');

        documentEl.on('scroll', function() {
            var currScrollPos = documentEl.scrollTop();


            fadeElem.each(function() {
                var $this = $(this),
                    elemOffsetTop = $this.offset().top;
                if (currScrollPos > elemOffsetTop) $this.css('opacity', 1 - (currScrollPos-elemOffsetTop)/800);
            });
        });
    });

    </script>

  </body>
</html>
